test:
  image: poezio/test-base:latest
  tags:
    - docker
  script:
    - git clone git://git.louiz.org/slixmpp
    - pip3 install --upgrade pip
    - pip3 install pytest pyasn1-modules --upgrade
    - pushd slixmpp
    - python3 setup.py build
    - python3 setup.py install
    - popd
    - python3 setup.py install
    - py.test test/
    - pip3 install -e git+https://github.com/PyCQA/astroid.git#egg=astroid
    - pip3 install -e git+https://github.com/PyCQA/pylint.git#egg=pylint
    - pylint -E poezio
